{% extends "base.html" %}

{% block title %}Discover - Art Stuff{% endblock %}

{% block content %}
<div class="explore-page">
    <!-- Loading state while determining auth -->
    <div id="explore-loading" class="explore-welcome" style="text-align: center; padding: 4rem 0;">
        <p class="loading">Loading gallery...</p>
    </div>

    <!-- Preview Mode for Guests (shown via JS based on auth state) -->
    <div id="preview-mode" style="display: none;">
        <section class="explore-welcome">
            <h1 class="explore-welcome__title">Discover Masterworks</h1>
            <p class="explore-welcome__subtitle">A curated selection from the world's great museums</p>
        </section>

        <div class="preview-grid painting-grid" id="preview-grid">
            <!-- Populated by JS -->
        </div>

        <section class="preview-cta">
            <div class="preview-cta__content">
                <h2 class="preview-cta__title">Build Your Own Playlists</h2>
                <p class="preview-cta__text">Create a free account to collect paintings, build shareable playlists, and share your taste with friends.</p>
                <a href="/login?signup" class="btn btn--primary btn--large">Start Collecting</a>
                <p class="preview-cta__signin">Already have an account? <a href="/login">Sign in</a></p>
            </div>
        </section>
    </div>

    <!-- Full Explore Mode for Logged-in Users (shown via JS based on auth state) -->
    <div id="full-explore-mode" style="display: none;">
        <!-- Welcome Section with Stats -->
        <section class="explore-welcome">
            <h1 class="explore-welcome__title">Discover. Collect. Share.</h1>
            <p class="explore-welcome__subtitle">Browse masterworks from the world's great museums. Build playlists. Share your taste.</p>

            <div class="collection-stats" id="collection-stats">
                <div class="stat">
                    <span class="stat__number" data-target="0" id="stat-paintings">0</span>
                    <span class="stat__label">Art Stuff</span>
                </div>
                <div class="stat">
                    <span class="stat__number" data-target="0" id="stat-artists">0</span>
                    <span class="stat__label">Artists</span>
                </div>
                <div class="stat">
                    <span class="stat__number" data-target="0" id="stat-museums">0</span>
                    <span class="stat__label">Museums</span>
                </div>
            </div>
        </section>

        <!-- Browse by Era - Carousel -->
        <section class="explore-section">
            <h2 class="explore-section__title">Browse by Era</h2>
            <p class="explore-section__subtitle">Journey through art history</p>
            <div class="carousel" id="eras-carousel">
                <div class="carousel__track" id="eras-track">
                    <!-- Populated by JS -->
                </div>
                <div class="carousel__nav">
                    <button class="carousel__btn carousel__btn--prev" data-carousel="eras-track">&larr;</button>
                    <button class="carousel__btn carousel__btn--next" data-carousel="eras-track">&rarr;</button>
                </div>
            </div>
        </section>

        <!-- Browse by Theme - Carousel -->
        <section class="explore-section">
            <h2 class="explore-section__title">Browse by Theme</h2>
            <p class="explore-section__subtitle">What speaks to you?</p>
            <div class="carousel" id="themes-carousel">
                <div class="carousel__track" id="themes-track">
                    <!-- Populated by JS -->
                </div>
                <div class="carousel__nav">
                    <button class="carousel__btn carousel__btn--prev" data-carousel="themes-track">&larr;</button>
                    <button class="carousel__btn carousel__btn--next" data-carousel="themes-track">&rarr;</button>
                </div>
            </div>
        </section>

        <!-- Featured Artist & Weekly Focus -->
        <section class="explore-section">
            <h2 class="explore-section__title">Featured</h2>
            <p class="explore-section__subtitle">Today's artist & this week's focus</p>
            <div class="featured-pair" id="featured-track">
                <!-- Populated by JS -->
            </div>
        </section>

        <!-- Surprise Me - Whimsical floating button -->
        <div class="surprise-float" id="surprise-float">
            <button class="surprise-btn" id="surprise-btn">
                <span class="surprise-btn__icon">&#10024;</span>
                <span class="surprise-btn__text">Surprise Me</span>
            </button>
        </div>

        <!-- Browse by Mood -->
        <section class="explore-section">
            <h2 class="explore-section__title">Browse by Mood</h2>
            <p class="explore-section__subtitle">How are you feeling?</p>
            <div class="mood-grid" id="moods-grid">
                <!-- Populated by JS -->
            </div>
        </section>

        <!-- Search Fallback -->
        <section class="explore-search">
            <p>Know what you're looking for?</p>
            <a href="/search" class="btn">Search by Artist or Keyword</a>
        </section>
    </div>
</div>
{% endblock %}
