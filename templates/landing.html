<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Art Stuff - Discover Cool Art Stuff</title>

    <!-- Redirect immediately if already onboarded or logged in -->
    <script>
        if (localStorage.getItem('auth_token') || localStorage.getItem('onboarding_complete')) {
            window.location.replace('/explore');
        }
    </script>

    <!-- PWA Meta Tags -->
    <meta name="description" content="Art Stuff: Discover masterworks from world-class museums. Build playlists of art that moves you. Share your taste with friends.">
    <meta name="theme-color" content="#E8DFD4">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Art Stuff">
    <link rel="manifest" href="{{ url_for('static', filename='manifest.json') }}">
    <link rel="apple-touch-icon" href="{{ url_for('static', filename='icons/icon-192.png') }}">
    <link rel="icon" type="image/svg+xml" href="{{ url_for('static', filename='favicon.svg') }}">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600&family=Inter:wght@400;500&display=swap" rel="stylesheet">

    <style>
        *, *::before, *::after {
            box-sizing: border-box;
        }

        :root {
            --color-gold: #C5A55A;
            --color-gold-light: #D4BC7C;
            --color-gold-dark: #9A7B3C;
            --color-bg: #E8DFD4;
            --color-text: #2D2926;
            --color-text-secondary: #5C5552;
            --font-serif: 'Cormorant Garamond', Georgia, serif;
            --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        }

        html, body {
            margin: 0;
            padding: 0;
            height: 100%;
            font-family: var(--font-sans);
            color: var(--color-text);
            background: var(--color-bg);
            overflow: hidden;
        }

        .onboarding {
            position: fixed;
            inset: 0;
            background: var(--color-bg);
            display: flex;
            flex-direction: column;
            padding-top: env(safe-area-inset-top);
            padding-bottom: env(safe-area-inset-bottom);
            transition: opacity 0.4s ease;
        }

        .onboarding.fade-out {
            opacity: 0;
        }

        .onboarding__track {
            flex: 1;
            display: flex;
            overflow-x: auto;
            scroll-snap-type: x mandatory;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
        }

        .onboarding__track::-webkit-scrollbar {
            display: none;
        }

        .onboarding__slide {
            flex: 0 0 100%;
            width: 100%;
            scroll-snap-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem 2.5rem;
            text-align: center;
            position: relative;
        }

        .onboarding__bg {
            position: absolute;
            inset: 0;
            background-size: cover;
            background-position: center;
            opacity: 0.35;
        }

        .onboarding__bg::after {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(
                to bottom,
                rgba(232, 223, 212, 0.2) 0%,
                rgba(232, 223, 212, 0.4) 40%,
                rgba(232, 223, 212, 0.7) 100%
            );
        }

        .onboarding__slide > :not(.onboarding__bg) {
            position: relative;
            z-index: 1;
        }

        .onboarding__icon {
            width: 80px;
            height: 80px;
            margin-bottom: 2rem;
        }

        .onboarding__icon svg {
            width: 100%;
            height: 100%;
        }

        .onboarding__heading {
            font-family: var(--font-serif);
            font-size: 2.25rem;
            font-weight: 500;
            margin: 0 0 0.75rem 0;
            letter-spacing: -0.02em;
        }

        .onboarding__desc {
            font-size: 1rem;
            line-height: 1.6;
            color: var(--color-text-secondary);
            max-width: 300px;
            margin: 0;
        }

        .onboarding__cta {
            display: inline-block;
            margin-top: 2rem;
            padding: 0.875rem 2.5rem;
            background: var(--color-gold);
            color: white;
            font-family: var(--font-sans);
            font-size: 1rem;
            font-weight: 500;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.2s ease;
            text-decoration: none;
        }

        .onboarding__cta:hover {
            background: var(--color-gold-dark);
        }

        .onboarding__dots {
            display: flex;
            justify-content: center;
            gap: 10px;
            padding: 1.5rem 0 2.5rem;
        }

        .onboarding__dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #C8BFB4;
            border: none;
            padding: 0;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .onboarding__dot.active {
            background: var(--color-gold);
        }

        @media (max-height: 600px) {
            .onboarding__icon {
                width: 60px;
                height: 60px;
                margin-bottom: 1.25rem;
            }

            .onboarding__heading {
                font-size: 1.75rem;
            }

            .onboarding__desc {
                font-size: 0.9375rem;
            }

            .onboarding__dots {
                padding: 1rem 0 1.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="onboarding" id="onboarding">
        <div class="onboarding__track" id="track">
            <!-- Slide 1: Discover -->
            <div class="onboarding__slide">
                <div class="onboarding__bg" style="background-image: url('/static/images/kroyer-skagen.jpg')"></div>
                <div class="onboarding__icon">
                    <svg viewBox="0 0 80 80" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <!-- Framed painting -->
                        <rect x="12" y="10" width="56" height="50" rx="2" stroke="#C5A55A" stroke-width="2.5"/>
                        <rect x="18" y="16" width="44" height="38" rx="1" stroke="#C5A55A" stroke-width="1.5"/>
                        <!-- Landscape inside -->
                        <path d="M18 44 L30 32 L42 40 L52 30 L62 38 L62 54 L18 54 Z" fill="none" stroke="#C5A55A" stroke-width="1.5" stroke-linejoin="round"/>
                        <!-- Sun -->
                        <circle cx="52" cy="24" r="4" stroke="#C5A55A" stroke-width="1.5"/>
                        <!-- Stand -->
                        <line x1="30" y1="60" x2="22" y2="72" stroke="#C5A55A" stroke-width="2" stroke-linecap="round"/>
                        <line x1="50" y1="60" x2="58" y2="72" stroke="#C5A55A" stroke-width="2" stroke-linecap="round"/>
                        <line x1="40" y1="60" x2="40" y2="74" stroke="#C5A55A" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </div>
                <h2 class="onboarding__heading">Discover</h2>
                <p class="onboarding__desc">Explore masterworks from world-class museums and find art that speaks to you.</p>
            </div>

            <!-- Slide 2: Collect -->
            <div class="onboarding__slide">
                <div class="onboarding__bg" style="background-image: url('/static/images/monet-bennecourt.jpg')"></div>
                <div class="onboarding__icon">
                    <svg viewBox="0 0 80 80" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <!-- Stacked cards -->
                        <rect x="18" y="6" width="44" height="34" rx="3" stroke="#C5A55A" stroke-width="1.5" transform="rotate(-6 40 23)"/>
                        <rect x="16" y="14" width="44" height="34" rx="3" stroke="#C5A55A" stroke-width="1.5" transform="rotate(3 38 31)"/>
                        <rect x="14" y="22" width="48" height="38" rx="3" stroke="#C5A55A" stroke-width="2" fill="#E8DFD4"/>
                        <!-- Heart on front card -->
                        <path d="M33 38 C33 34, 28 33, 28 37 C28 41, 38 48, 38 48 C38 48, 48 41, 48 37 C48 33, 43 34, 43 38 L38 44 L33 38Z" stroke="#C5A55A" stroke-width="1.5" fill="none" stroke-linejoin="round"/>
                        <!-- Plus badge -->
                        <circle cx="56" cy="26" r="9" fill="#C5A55A" stroke="#E8DFD4" stroke-width="2"/>
                        <line x1="56" y1="22" x2="56" y2="30" stroke="#E8DFD4" stroke-width="2" stroke-linecap="round"/>
                        <line x1="52" y1="26" x2="60" y2="26" stroke="#E8DFD4" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </div>
                <h2 class="onboarding__heading">Collect</h2>
                <p class="onboarding__desc">Save your favorites and build personal playlists of art that moves you.</p>
            </div>

            <!-- Slide 3: Share -->
            <div class="onboarding__slide">
                <div class="onboarding__bg" style="background-image: url('/static/images/bellows-love-of-winter.jpg')"></div>
                <div class="onboarding__icon">
                    <svg viewBox="0 0 80 80" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <!-- Connected nodes -->
                        <circle cx="40" cy="20" r="8" stroke="#C5A55A" stroke-width="2"/>
                        <circle cx="20" cy="54" r="8" stroke="#C5A55A" stroke-width="2"/>
                        <circle cx="60" cy="54" r="8" stroke="#C5A55A" stroke-width="2"/>
                        <!-- Connecting lines -->
                        <line x1="34" y1="26" x2="24" y2="48" stroke="#C5A55A" stroke-width="1.5"/>
                        <line x1="46" y1="26" x2="56" y2="48" stroke="#C5A55A" stroke-width="1.5"/>
                        <line x1="28" y1="54" x2="52" y2="54" stroke="#C5A55A" stroke-width="1.5"/>
                        <!-- Small dots at center of nodes -->
                        <circle cx="40" cy="20" r="3" fill="#C5A55A"/>
                        <circle cx="20" cy="54" r="3" fill="#C5A55A"/>
                        <circle cx="60" cy="54" r="3" fill="#C5A55A"/>
                    </svg>
                </div>
                <h2 class="onboarding__heading">Share</h2>
                <p class="onboarding__desc">Share your taste with friends and discover what art inspires them.</p>
                <button class="onboarding__cta" id="getStarted">Get Started</button>
            </div>
        </div>

        <div class="onboarding__dots" id="dots">
            <button class="onboarding__dot active" data-slide="0" aria-label="Slide 1"></button>
            <button class="onboarding__dot" data-slide="1" aria-label="Slide 2"></button>
            <button class="onboarding__dot" data-slide="2" aria-label="Slide 3"></button>
        </div>
    </div>

    <script>
        const track = document.getElementById('track');
        const dots = document.querySelectorAll('.onboarding__dot');
        const onboarding = document.getElementById('onboarding');

        // Update active dot on scroll
        track.addEventListener('scroll', function() {
            const slideWidth = track.offsetWidth;
            const index = Math.round(track.scrollLeft / slideWidth);
            dots.forEach(function(dot, i) {
                dot.classList.toggle('active', i === index);
            });
        });

        // Dot tap: scroll to slide
        dots.forEach(function(dot) {
            dot.addEventListener('click', function() {
                var slideIndex = parseInt(dot.getAttribute('data-slide'));
                track.scrollTo({ left: slideIndex * track.offsetWidth, behavior: 'smooth' });
            });
        });

        // Get Started button
        document.getElementById('getStarted').addEventListener('click', function() {
            localStorage.setItem('onboarding_complete', '1');
            onboarding.classList.add('fade-out');
            setTimeout(function() {
                window.location.replace('/explore');
            }, 400);
        });
    </script>
</body>
</html>
